import s from"postcss";import{setPurgeCSSOptions as t,extractSelectorsFromFiles as e,extractSelectorsFromString as r,walkThroughCSS as o,removeUnusedFontFaces as n,removeUnusedKeyframes as c,selectorsRemoved as p,defaultOptions as i}from"purgecss";const u=s.plugin("postcss-plugin-purgecss",(function(s){return async function(u,f){const a={...i,...s};t(a);const{content:g,extractors:m}=a,l=g.filter(s=>"string"==typeof s),y=g.filter(s=>"object"==typeof s),j=await e(l,m),x=r(y,m),d=new Set([...j,...x]);o(u,d),a.fontFace&&n(),a.keyframes&&c(),a.rejected&&p.size>0&&(f.messages.push({type:"purgecss",plugin:"postcss-purgecss",text:`purging ${p.size} selectors:\n        ${Array.from(p).map(s=>s.trim()).join("\n  ")}`}),p.clear())}}));export default u;
